{% extends 'base.html' %}
{% block title %}Doctors - Admin{% endblock %}
{% block content %}
<div class="d-flex align-items-center mb-3">
  <h1 class="h4 mb-0">Doctors</h1>
  <a href="{{ url_for('admin.doctor_new') }}" class="btn btn-primary btn-sm ms-3">Add Doctor</a>
</div>

<form method="get" class="row g-2 mb-3">
  <div class="col-md-4">
    <input type="text" name="q" class="form-control" placeholder="Search by name or specialization" value="{{ q }}">
  </div>
  <div class="col-md-2">
    <button class="btn btn-outline-secondary w-100">Search</button>
  </div>
</form>

{% if form is defined and (create or edit) %}
<div class="card mb-4">
  <div class="card-body">
    <form method="post" novalidate>
      {{ form.hidden_tag() }}
      <div class="row g-3">
        <div class="col-md-4">
          {{ form.name.label(class_='form-label') }}
          {{ form.name(class_='form-control', required=true) }}
        </div>
        <div class="col-md-4">
          {{ form.specialization.label(class_='form-label') }}
          {{ form.specialization(class_='form-control', required=true) }}
        </div>
        <div class="col-md-4">
          {{ form.contact.label(class_='form-label') }}
          {{ form.contact(class_='form-control') }}
        </div>
        <div class="col-12">
          {{ form.bio.label(class_='form-label') }}
          {{ form.bio(class_='form-control', rows=3) }}
        </div>
      </div>
      <div class="mt-3">
        {{ form.submit(class_='btn btn-primary') }}
      </div>
    </form>
  </div>
</div>
{% endif %}

<ul class="list-group">
  {% for d in doctors %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    <div>
      <div class="fw-semibold">{{ d.name }}</div>
      {% if d.doctor_profile %}<div class="small text-muted">{{ d.doctor_profile.specialization }}</div>{% endif %}
    </div>
    <div>
      <a href="{{ url_for('admin.doctor_edit', id=d.id) }}" class="btn btn-sm btn-outline-primary">Edit</a>
      <form method="post" action="{{ url_for('admin.doctor_delete', id=d.id) }}" class="d-inline">
        {{ delete_form.hidden_tag() }}
        <button class="btn btn-sm btn-outline-danger">Delete</button>
      </form>
    </div>
  </li>
  {% else %}
  <li class="list-group-item">No doctors found.</li>
  {% endfor %}
</ul>
{% endblock %}
